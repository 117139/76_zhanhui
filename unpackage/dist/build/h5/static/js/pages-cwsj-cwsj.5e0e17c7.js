(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-cwsj-cwsj"],{"3b7d":function(t,e,a){"use strict";a.r(e);var i=a("6ef7"),n=a("8f5f");for(var s in n)"default"!==s&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("c72f");var o,c=a("f0c5"),l=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,"c1c69a6a",null,!1,i["a"],o);e["default"]=l.exports},"6ef7":function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"minh100"},[i("v-uni-view",{staticClass:"box_box"},[i("v-uni-image",{staticClass:"bpx_bg",attrs:{src:a("89ca"),mode:"widthFix"}}),i("v-uni-view",{staticClass:"box_main"},[i("v-uni-view",{staticClass:"box_tit"},[t._v("店铺名称")]),i("v-uni-input",{staticClass:"box_int",attrs:{type:"text",placeholder:"请输入店铺名称"},model:{value:t.datas.shop_name,callback:function(e){t.$set(t.datas,"shop_name",e)},expression:"datas.shop_name"}}),i("v-uni-view",{staticClass:"box_tit"},[t._v("LOGO设置")]),i("v-uni-view",{staticClass:"pz_imgs"},[t._l(t.sj_img,(function(e,a){return t.sj_img.length>0?i("v-uni-view",{staticClass:"pz_img"},[i("v-uni-image",{staticClass:"img_del",attrs:{src:"/static/images/img_del.png",mode:"aspectFill","data-idx":a,"data-type":"1"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.imgdel.apply(void 0,arguments)}}}),i("v-uni-image",{attrs:{mode:"aspectFill",src:t.getimg(e),"data-src":t.getimg(e)},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.pveimg.apply(void 0,arguments)}}})],1):t._e()})),t.sj_img.length<1?i("v-uni-view",{staticClass:"pz_img"},[i("v-uni-image",{attrs:{src:"/static/images/upimg.png",mode:"aspectFit","data-type":"1"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upimg.apply(void 0,arguments)}}})],1):t._e()],2),i("v-uni-view",{staticClass:"box_tit"},[t._v("店铺背景图")]),i("v-uni-view",{staticClass:"pz_imgs"},[t._l(t.sj_img2,(function(e,a){return t.sj_img2.length>0?i("v-uni-view",{staticClass:"pz_img"},[i("v-uni-image",{staticClass:"img_del",attrs:{src:"/static/images/img_del.png",mode:"aspectFill","data-idx":a,"data-type":"2"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.imgdel.apply(void 0,arguments)}}}),i("v-uni-image",{attrs:{mode:"aspectFill",src:t.getimg(e),"data-src":t.getimg(e)},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.pveimg.apply(void 0,arguments)}}})],1):t._e()})),t.sj_img2.length<9?i("v-uni-view",{staticClass:"pz_img"},[i("v-uni-image",{attrs:{src:"/static/images/upimg.png",mode:"aspectFit","data-type":"2"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upimg.apply(void 0,arguments)}}})],1):t._e()],2),t.array?i("v-uni-view",{staticClass:"box_tit"},[t._v("服务类型")]):t._e(),t.array?i("v-uni-picker",{attrs:{"data-type":"1",value:t.fw_index,range:t.array,"range-key":"category_name"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindPickerChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"box_int ju_b"},[i("v-uni-view",[t._v(t._s(t.array[t.fw_index]?t.array[t.fw_index].category_name:"请选择服务类型"))]),i("v-uni-text",{staticClass:"iconfont icon-next-m"})],1)],1):t._e(),i("v-uni-view",{staticClass:"box_tit"},[t._v("店铺标签")]),i("v-uni-textarea",{staticClass:"box_int box_textarea",attrs:{value:"",placeholder:"请输入店铺标签,每个标签以回车区分",maxlength:"-1"},model:{value:t.datas.shop_type,callback:function(e){t.$set(t.datas,"shop_type",e)},expression:"datas.shop_type"}}),i("v-uni-view",{staticClass:"box_tit"},[t._v("联系人姓名")]),i("v-uni-input",{staticClass:"box_int",attrs:{type:"text",placeholder:"请输入联系人姓名"},model:{value:t.datas.user_name,callback:function(e){t.$set(t.datas,"user_name",e)},expression:"datas.user_name"}}),i("v-uni-view",{staticClass:"box_tit"},[t._v("联系人电话")]),i("v-uni-input",{staticClass:"box_int",attrs:{type:"number",placeholder:"请输入联系人电话"},model:{value:t.datas.phone,callback:function(e){t.$set(t.datas,"phone",e)},expression:"datas.phone"}}),i("v-uni-view",{staticClass:"box_tit"},[t._v("店铺地址")]),i("v-uni-view",{staticClass:"box_int ju_b"},[i("v-uni-view",{staticClass:"dis_flex aic",staticStyle:{width:"500upx"}},[i("v-uni-view",{staticClass:"flex_1 text-cut"},[t._v(t._s(t.datas.address?t.datas.address:"请选择店铺地址"))])],1),i("v-uni-text",{staticClass:"iconfont icon-adress",staticStyle:{color:"#4AA3FF","font-size":"35upx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getLocation_fuc.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"box_tit"},[t._v("店铺简介")]),i("v-uni-textarea",{staticClass:"box_content",attrs:{placeholder:"",maxlength:"-1"},model:{value:t.datas.detail,callback:function(e){t.$set(t.datas,"detail",e)},expression:"datas.detail"}}),i("v-uni-view",{staticClass:"sub_btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sub.apply(void 0,arguments)}}},[t._v("提交")])],1)],1)],1)},s=[]},"89ca":function(t,e,a){t.exports=a.p+"static/img/cwsj_02.ae2d9eab.jpg"},"8f5f":function(t,e,a){"use strict";a.r(e);var i=a("f9de"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},aacf:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".box_box[data-v-c1c69a6a]{width:100%;position:relative;padding:%?150?% %?30?% 0}.bpx_bg[data-v-c1c69a6a]{width:100%;position:absolute;top:0;left:0;z-index:1}.box_main[data-v-c1c69a6a]{width:100%;background:#fff;-webkit-box-shadow:0 2px 10px 0 rgba(0,0,0,.25);box-shadow:0 2px 10px 0 rgba(0,0,0,.25);-webkit-border-radius:4px;border-radius:4px;position:relative;z-index:2;padding:0 %?30?% %?30?%}.box_tit[data-v-c1c69a6a]{width:100%;height:%?100?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-weight:700}.box_int[data-v-c1c69a6a]{width:100%;height:%?76?%;background:#fff;border:1px solid #dedede;-webkit-border-radius:%?4?%;border-radius:%?4?%;font-size:%?30?%;color:#444;padding:0 %?20?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.box_int uni-text[data-v-c1c69a6a]{font-size:%?24?%}.box_textarea[data-v-c1c69a6a]{height:%?200?%;padding:%?15?%}.pz_imgs[data-v-c1c69a6a]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap\n\t/* padding-bottom: 30upx;\n\tborder-bottom: 1px solid #eee; */}.pz_img[data-v-c1c69a6a]{\n\t/* width: 180upx;\n\theight: 140upx; */width:%?174?%;-webkit-border-radius:%?10?%;border-radius:%?10?%;margin-right:%?15?%;\n\t/* margin-bottom: 15upx; */position:relative}.pz_img uni-image[data-v-c1c69a6a]{\n\t/* width: 180upx;\n\theight: 140upx; */width:%?164?%;height:%?164?%}.pz_img .img_del[data-v-c1c69a6a]{width:%?30?%;height:%?30?%;\n\t/* background: #FF4B4B; */-webkit-border-radius:%?15?%;border-radius:%?15?%;position:absolute;top:%?-10?%;right:%?-10?%;z-index:10}.box_content[data-v-c1c69a6a]{width:100%;height:%?248?%;background:#fff;border:1px solid #dedede;-webkit-border-radius:%?4?%;border-radius:%?4?%;padding:%?25?%;font-size:%?30?%;color:#333}.sub_btn[data-v-c1c69a6a]{margin-top:%?40?%;width:100%;height:%?88?%;background:#fe8018;-webkit-border-radius:%?44?%;border-radius:%?44?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;font-size:%?32?%;color:#fff}",""]),t.exports=e},c72f:function(t,e,a){"use strict";var i=a("c964"),n=a.n(i);n.a},c964:function(t,e,a){var i=a("aacf");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("8d6c8abc",i,!0,{sourceMap:!1,shadowMode:!1})},f9de:function(t,e,a){"use strict";var i=a("4ea4");a("a15b"),a("a434"),a("ac1f"),a("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,s=i(a("5530")),o=i(a("e143")),c=i(a("bdd1")),l=i(a("00b8")),d=a("2f62"),r={data:function(){return{fw_list:[],sj_img:[],sj_img2:[],array:[],fw_index:0,region_id:[1,35,36],region:["北京市","北京","东城区"],areaJson:{},datas:{shop_name:"",logo:"",thumbnail_img:"",shop_banner:"",shop_category_id:"",shop_type:"",user_name:"",phone:"",address:"",lats:"",lngs:"",detail:""}}},computed:(0,s.default)({},(0,d.mapState)(["hasLogin","userName","loginDatas"])),onLoad:function(){n=this,n.getdata(),n.getcate(),n.areaJson=l.default.area},methods:(0,s.default)((0,s.default)({},(0,d.mapMutations)(["login","logindata","logout","setplatform"])),{},{getLocation_fuc:function(){console.log("chooseLocation"),wx.chooseLocation({success:function(t){console.log(t),o.default.set(n.datas,"address",t.address),o.default.set(n.datas,"lngs",t.longitude),o.default.set(n.datas,"lats",t.latitude)},fail:function(t){console.log(t)}})},bindPickerChange:function(t){console.log(t.currentTarget.dataset.type);var e=t.currentTarget.dataset;1==e.type&&(n.fw_index=t.detail.value,o.default.set(n.datas,"shop_category_id",n.array[n.fw_index].id))},getcate:function(){var t={},e="/shops/get_shop_category";c.default.P_post(e,t).then((function(t){if(n.btn_kg=0,console.log(t),1==t.code){var e=t.data;console.log(typeof e),"string"==typeof e&&(e=JSON.parse(e)),n.array=e,o.default.set(n.datas,"shop_category_id",n.array[0].id),console.log(e)}else n.htmlReset=1,t.msg?uni.showToast({icon:"none",title:t.msg}):uni.showToast({icon:"none",title:"获取失败"})})).catch((function(t){n.btn_kg=0,n.htmlReset=1,console.log(t),uni.showToast({icon:"none",title:"获取数据失败"})}))},getdata:function(){var t="/user/residence_info",e={token:uni.getStorageSync("token")};uni.showLoading({title:"正在获取数据"}),c.default.P_post(t,e).then((function(t){if(n.btn_kg=0,console.log(t),1==t.code){var e=t.data;console.log(typeof e),"string"==typeof e&&(e=JSON.parse(e)),3==e.status&&(e.refusal_reasons?uni.showToast({icon:"none",title:e.refusal_reasons}):uni.showToast({icon:"none",title:"审核失败"}))}})).catch((function(t){n.btn_kg=0,console.log(t),uni.showToast({icon:"none",title:"获取数据失败"})}))},sub:function(){if(n.datas.phone){var t="/user/user_residence",e=n.datas.shop_type.split(/\n/).join(",");if(o.default.set(n.datas,"shop_type",e),console.log(n.datas),1!=n.btn_kg){n.btn_kg=1;var a=n.datas;uni.showLoading({title:"正在提交"}),c.default.P_post(t,a).then((function(t){if(n.btn_kg=0,console.log(t),1==t.code){var e=t.data;console.log(typeof e),"string"==typeof e&&(e=JSON.parse(e)),uni.showToast({icon:"none",title:"提交成功"}),c.default.login_tel("1"),setTimeout((function(){n.datas={shop_name:"",logo:"",thumbnail_img:"",shop_banner:"",shop_category_id:"",shop_type:"",user_name:"",phone:"",address:"",lats:"",lngs:"",detail:""},n.sj_img="",n.sj_img2=""}),1e3)}else{var a=n.datas.shop_type.join("\n");o.default.set(n.datas,"shop_type",a),t.msg?uni.showToast({icon:"none",title:t.msg}):uni.showToast({icon:"none",title:"操作失败"})}})).catch((function(t){n.btn_kg=0;var e=n.datas.shop_type.join("\n");o.default.set(n.datas,"shop_type",e),console.log(t),uni.showToast({icon:"none",title:"获取数据失败"})}))}}else uni.showToast({icon:"none",title:"请输入联系人电话"})},upimg:function(t){var e=this,a=t.currentTarget.dataset,i=1-e.sj_img.length;2==a.type&&(i=9-e.sj_img2.length),uni.showActionSheet({itemList:["拍照","相册"],success:function(t){console.log("选中了第"+(t.tapIndex+1)+"个按钮");var n=["camera","album"];n=0==t.tapIndex?["camera"]:["album"],uni.chooseImage({count:i,sizeType:["original","compressed"],sourceType:n,success:function(t){console.log(t);var i=t.tempFilePaths;e.upimg1(i,a.type,0)}})},fail:function(t){console.log(t.errMsg)}})},upimg1:function(t,e,a){var i=this;c.default.wx_upload(t[a]).then((function(n){if(i.btn_kg=0,console.log(n),1==n.code){var s,c=n.data.url;if(console.log(a),2==e){i.sj_img2.push(c),s=i.sj_img2.length;var l=i.sj_img2.join(",");o.default.set(i.datas,"thumbnail_img",i.sj_img2[0]),o.default.set(i.datas,"shop_banner",l),s<9&&a<t.length-1&&(a++,i.upimg1(t,e,a))}else i.sj_img.push(c),s=i.sj_img.length,o.default.set(i.datas,"logo",c),s<1&&a<t.length-1&&(a++,i.upimg1(t,e,a))}else n.msg?uni.showToast({icon:"none",title:n.msg}):uni.showToast({icon:"none",title:"上传失败"})})).catch((function(t){i.btn_kg=0,console.log(t),uni.showToast({icon:"none",title:"操作失败"})}))},getimg:function(t){return c.default.getimg(t)},pveimg:function(t){c.default.pveimg(t)},imgdel:function(t){var e=this;console.log(t.currentTarget.dataset.idx);var a=t.currentTarget.dataset;uni.showModal({title:"提示",content:"确定要删除这张图片吗",success:function(i){if(i.confirm)if(console.log("用户点击确定",t.currentTarget.dataset.type),2==a.type){e.sj_img2.splice(a.idx,1);var n=e.sj_img2.join(","),s=e.sj_img2[0]||"";o.default.set(e.datas,"thumbnail_img",s),o.default.set(e.datas,"shop_banner",n)}else e.sj_img.splice(a.idx,1),o.default.set(e.datas,"logo","");else i.cancel&&console.log("用户点击取消")}})}})};e.default=r}}]);